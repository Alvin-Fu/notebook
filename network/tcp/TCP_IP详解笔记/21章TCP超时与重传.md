# TCP超时与重传
## 往返时间RTT
RTT(Round Trip Time): 一个连接的往返时间，即数据发送时刻到接收到确认的时刻差值
RTO(Retransmission Time Out): 重传超时时间，即从数据发送时刻算起，超过这个时间便执行重传
RTT和RTO的关系：由于网络波动的不确定性，RTO是随着RTT动态变化的。
### 往返时间RTT的测量
这里的往返说的是**报文发出到收到确认的时间**
首先需要知道RTO的设置不合理会导致性能问题，过短会导致频繁重传，加快网络阻塞；过长会导致性能下降(失序的报文段得不到确认，接收方无法提交给进程)
在TCP中不是对所有的发送的报文段测量RTT，在任何时候对于每个连接仅测量一次RTT值，在发送报文的时候如果定时器已经被使用，则该报文段不被计时，反之被记时。这个过程称为采样得到一个SampleRTT，然后使用算法使得SampleRTT代表所有的RTT
- 一个连接中同一时间有且仅有一个报文段会被测量
- TCP绝不会为已被重传的报文段测量SampleRTT，仅为传输一次的进行测量
- ACK数据报不会被测量，因为ACK的数据报不会有回应

### 1、慢启动和拥塞控制
为了避免大流量导致的阻塞，一般会进行满启动，给系统进行预热，缓慢增大流量。
TCP发包的时候在没有到达ssthresh(慢启动的阀值)大小时进行的是2的指数增加，在这个过程中如果有包传输时出错，就会终止增长，到达ssthresth时进行线性增长
在一般的入口服务处需要这种方式，防止顺时流量过大，导致服务崩溃，主要时顺时流量增大时为了对其进行处理就会分配资源，导致一时间的所有性能都被用到了资源的分配上。


