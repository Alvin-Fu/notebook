InnoDB和myisam两种存储引擎的区别
# 一、二者之间的区别
是否支持事务： InnoDB支持， Myisam不支持
索引类型： InnoDB聚集索引， Myisam非聚集索引
是否支持外键： InnoDB支持， Myisam不支持
锁的最小粒度： InnoDB是行锁， Myisam是表锁（一个更新语句会锁住整个表，严重影响性能，并发受限制）
InnoDB中不保存表中数据的行数，Myisam会保存表中数据的行数

### 存储结构：
	InnoDB：所有表都保存在同一个问题中（注：有可能是多个，或者单独的表空间文件），表的大小只受限于操作系统文件的大小
	Myisam：有三个文件，分表是表定义文件(以表名字开始，扩展名指出文件类型.frm)，数据文件(.MYD)，索引文件(.MYI)
### 存储空间：
	InnoDB：需要更多的内存和存储，会在主内存中建立专用的缓冲池用于高速缓冲数据和索引
	Myisam:三种不同的存储格式静态表(默认，注意：数据末尾不能有空格，会被去掉)，动态表，压缩表(在表创建和数据导入，不在进行修改操作，可以使用压缩表，有利于节省空间)
### 可移植性、备份和恢复：
	Mysiam: 由于数据都以文件的形式，因此在跨平台和单表的迁移非常好
	InnoDB: 免费的方案可以是拷贝数据文件、备份 binlog，或者用 mysqldump，在数据量达到几十G的时候就相对痛苦了
### 全文索引：
	Mysiam: 支持FULLText类型的索引，这个在搜索很长的文章是效果很好，在用于较短的时候效果不是很好
	InnoDB: 不支持FullText类型索引，使用sphinx插件支持全文索引并且效果很好
### 表主键：
	Mysiam: 允许没有任何主键和索引的表存在，索引都是保存行的地址
	InnoDB：如果没有设定主键或非空索引，就会自动生成一个6字节的主键，并且对用户不可见，数据是主索引的一部分，附加索引保存的是主索引的值

# 二、二者使用的场景
## 2.1 InnoDB的使用场景
需要支持事务的场景
读写比较复杂的场景
不能接受系统崩溃后数据的恢复问题
不知道怎么选是就选InnoDB
## 2.2 Myisam的使用场景
表中绝大多数都是只读场景

# 三、InnoDB的聚集索引(一种基于索引的表)
什么是聚集索引：索引和数据的行值在一起保存，InnoDB的聚集索引是基于B+数实现的，数据保存在叶子节点
**由于数据是按照索引进行组织的，因此可以解释为什么InnoDB表一定要有主键或非空索引**
## InnoDB的聚集索引如何选择
分为三种情况：
	1. 表中有主键时，以主键作为聚集索引
	2. 没有主键但是有非空唯一索引，就以第一个非空唯一索引作为聚集索引
	3. 二者都没有时InnnoDB内部会生成一个6字节的隐藏主键作为索引，这个列是自增的
**在使用的时候应该给表建立主键，如果没有逻辑上的就创建自增列作为主键**
## 次级索引和主键的关系
次级索引中保存的是主键的值，而不是数据的行地址，因此在搜索的时候，先是找次级索引自身，然后在去查找主键
次级索引不会被更新，在更新时是先将这个索引进行删除然后在写入的

## 聚集索引的优点
1. 通过主键进行查找会很快速
2. 区间查找也很快速，聚集索引中的数据是根据主键进行排序的

















参考内容：
[InnoDB和Myisam的区别](https://www.zhihu.com/question/20596402)